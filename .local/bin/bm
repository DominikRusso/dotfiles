#!/bin/sh

# browser independent bookmark management

# the bookmarks file (~/.local/share/bookmarks) should contain
# one bookmark per line in the following format:
# name of bookmark | url

# bm:    select a bookmark in fzf and open it in $BROWSER
# bm -e: edit the bookmarks file in your $EDITOR
# bm -l: print the contents of the bookmark file to stdout


bookmarks="$HOME/.local/share/bookmarks"

if [ "$1" = "-e" ]; then
    $EDITOR "$bookmarks"
    exit
fi

if [ "$1" = "-l" ]; then
    cat "$bookmarks"
    exit
fi

sep="|"
url=$(cut -f 1 -d $sep "$bookmarks" | fzf | xargs -i grep -F "{}" "$bookmarks" | cut -f 2 -d $sep)
[ -z "$url" ] && exit
$BROWSER "$url" </dev/null >/dev/null 2>&1 &
